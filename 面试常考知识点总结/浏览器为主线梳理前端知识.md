### 1、浏览器进程

​	当前的Chrome浏览器打开一个页面，至少会启动四个进程：浏览器进程、网络进程、渲染进程和GPU进程。另外浏览器通常还会有插件进程。其各进程的作用如下：

（1）**浏览器进程**：主要负责界面显示、用户交互、子进程管理，同时提供存储等功能。

（2）**渲染进程（一个或多个）**：主要负责把从网络上下载下来的HTML、JavaScript、CSS、图片等资源解析为可显示和交互的页面。由于这些资源都是从网上下载下来的，可能会存在一些恶意代码利用浏览器漏洞对浏览器进行攻击，所有渲染进程里面的代码是不被信任的，Chrome中让渲染进程运行在安全沙箱。

​	通常情况下，打开一个新的页面会有一个单独的渲染进程，但是如果从A页面打开B页面，且A和B页面属于同一个站点的话，那么B页面会复用A页面的渲染进程。

（3）**网络进程**：主要负责网络资源的加载，为渲染进程和浏览器进程提供下载功能。

（4）**GPU进程：**使用的初衷是为了实现3D的CSS效果，但后来网页、Chrome的UI界面都选择采用GPU来绘制。

（5）**插件进程（一个或多个）**：主要是负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。为防止恶意插件，通常插件进程也是运行在安全沙箱里。



### 5、在浏览器中输入一个URL地址，到显示的过程

##### 	1、生成并传递url

​		浏览器进程检查url，组装协议，构成完整的url，浏览器进程通过进程间通信（IPC）把url请求发送给网络进程。

##### 	2、URL请求过程

​		（1）查找本地缓存

​			网络进程在发起网络请求之前，会先查找本地是否有缓存资源。如果有缓存资源且可用则直接返回资源给浏览器进程。如果没有或者缓存资源过时则直接进入网络请求流程。

​		（2）DNS域名解析，获取域名服务器的IP地址。

​		（3）TCP连接

​			利用IP地址和服务器建立TCP连接。

​		（4）发送Http请求

​			建立好连接后，浏览器会构建请求报文并发送给请求信息。

##### 	3、服务器处理并返回http报文

​		（1）重定向：如果需要重定向，会在响应报文的状态行中说明。浏览器在收到响应报文后，网络进程开始解析响应头，如果发现状态码是301或302就说明浏览器还需要重定向到其他的URL。会发起新的请求。

​		（2）响应数据类型处理：浏览器会判断Content-type里面是什么数据类型，如果是下载数据类型就会被提交给浏览器的下载管理器。

##### 	4、浏览器解析并渲染页面

​		（1）准备渲染进程

​		通常情况下，打开一个新的页面会有一个单独的渲染进程，但是如果从A页面打开B页面，且A和B页面属于同一个站点的话，那么B页面会复用A页面的渲染进程。

​		（2）提交文档

​		渲染进程准备好之后，还不能立即进入文档解析状态，因为此时的文档数据还在网络进程中，并没有提交给渲染进程，所以下一步就进入了提交文档阶段。“提交文档”的消息是由浏览器进程发出的，渲染进程接收到“提交文档”的消息后，会和网络进程建立传输数据的“**管道**”。等文档数据传输完成之后，渲染进程会返回“**确认提交**”的消息给浏览器进程。浏览器进程在收到“确认提交”的消息后，会**更新浏览器界面状态**，包括了安全状态、地址栏的 URL、前进后退的历史状态，并更新 Web 页面。

​		（3）渲染阶段

​		一旦文档被提交，渲染进程便开始页面解析和子资源加载了。

##### 	5、连接结束

### 6、浏览器渲染页面的过程

​	1、浏览器将获取的HTML文档解析成DOM树，并在生成的最开始阶段并行的发起css、图片、js的请求。

​	2、处理CSS标记，当CSS文件下载完成后就开始构造层叠样式表模型CSSOM(CSS Object Model)。

​	3、将DOM和CSSOM合并为渲染树(rendering tree)，代表一系列将被渲染的对象。

​	4、浏览器根据渲染树计算出每个节点在屏幕中的位置，称之为Layout。

​	5、将渲染树的各个节点绘制到屏幕上，这一步被称为绘制painting。

#### 7、重排/回流、重绘

##### 	重排/回流：

​		当render tree中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建。这就称为回流/重排(reflow)。

##### 	重绘： 

​		当render tree中的一些元素需要更新属性，而这些属性只是影响元素的外观，风格，而不会影响布局的，比如background-color。

​	回流必将引起重绘，而重绘不一定会引起回流。



