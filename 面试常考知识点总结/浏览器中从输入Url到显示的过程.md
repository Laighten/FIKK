### 浏览器中从输入一个url到页面显示的过程

#### （1）简答版

1. 浏览器检查url,组装协议并构成完整的url,并把url发送给网络进程；
2. 查找本地缓存，如果有缓存资源且可用的话则直接返回，如果没有的话就进入网络请求；
3. 进行DNS域名解析，获取服务器的IP地址；
4. TCP连接，利用IP地址和服务器建立连接；
5. 发送http请求；
6. 服务器接收并处理请求，如果需要重定向，就会发起新的请求。如果不需要就开始处理响应的数据；
7. 浏览器准备渲染进程，解析并渲染页面；

#### （2）复杂版

##### 	1、生成并传递url

​		浏览器进程检查url，组装协议，构成完整的url，浏览器进程通过进程间通信（IPC）把url请求发送给网络进程。

##### 	2、URL请求过程

​		（1）查找本地缓存

​			网络进程在发起网络请求之前，会先查找本地是否有缓存资源。如果有缓存资源且可用则直接返回资源给浏览器进程。如果没有或者缓存资源过时则直接进入网络请求流程。

​		（2）DNS域名解析，获取域名服务器的IP地址。

​		（3）TCP连接

​			利用IP地址和服务器建立TCP连接。

​		（4）发送Http请求

​			建立好连接后，浏览器会构建请求报文并发送给请求信息。

##### 	3、服务器处理并返回http报文

​		（1）重定向：如果需要重定向，会在响应报文的状态行中说明。浏览器在收到响应报文后，网络进程开始解析响应头，如果发现状态码是301或302就说明浏览器还需要重定向到其他的URL。会发起新的请求。

​		（2）响应数据类型处理：浏览器会判断Content-type里面是什么数据类型，如果是下载数据类型就会被提交给浏览器的下载管理器。

##### 	4、浏览器解析并渲染页面

​		（1）准备渲染进程

​		通常情况下，打开一个新的页面会有一个单独的渲染进程，但是如果从A页面打开B页面，且A和B页面属于同一个站点的话，那么B页面会复用A页面的渲染进程。

​		（2）提交文档

​		渲染进程准备好之后，还不能立即进入文档解析状态，因为此时的文档数据还在网络进程中，并没有提交给渲染进程，所以下一步就进入了提交文档阶段。“提交文档”的消息是由浏览器进程发出的，渲染进程接收到“提交文档”的消息后，会和网络进程建立传输数据的“**管道**”。等文档数据传输完成之后，渲染进程会返回“**确认提交**”的消息给浏览器进程。浏览器进程在收到“确认提交”的消息后，会**更新浏览器界面状态**，包括了安全状态、地址栏的 URL、前进后退的历史状态，并更新 Web 页面。

​		（3）渲染阶段

​		一旦文档被提交，渲染进程便开始页面解析和子资源加载了。

##### 	5、连接结束